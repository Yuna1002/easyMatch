import{_ as x,m as V,b as w,r as n,o as f,c as p,d as s,e as o,w as _,t as m,F as y,z as T,f as P,g as i,E as u,H as S,J as E}from"./index-5ef0d95b.js";import{c as v}from"./cartStore-02b303e7.js";import{S as k}from"./sweetalert2.all-2c3c332f.js";const{VITE_APP_URL:I,VITE_APP_PATH:A}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"yuna1002",BASE_URL:"/easyMatch/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},U={data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""},orderId:""}},computed:{...V(v,["cart"])},methods:{...w(v,["getCart"]),scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})},submitOrder(){const t=this.form;this.$http.post(`${I}/api/${A}/order`,{data:t}).then(e=>{k.fire({icon:"success",toast:!0,position:"top",title:"訂單建立成功",timer:2e3,showConfirmButton:!1}),this.$refs.form.resetForm(),this.getCart(),localStorage.setItem("totalIncludeGroup",this.cart.total*this.cart.group),this.orderId=e.data.orderId,this.$router.push(`/orderPay/${this.orderId}`,this.scrollToTop())}).catch(e=>{console.log(e)})}},mounted(){const t=this.$loading.show();setTimeout(()=>{t.hide()},600),this.getCart()}},C={class:"bg-tertiary-100"},R={class:"container"},$={"aria-label":"breadcrumb",class:"bg-tertiary-100 pt-3 mb-6"},L={class:"breadcrumb mb-0"},N={class:"breadcrumb-item"},B={class:"breadcrumb-item"},D=s("li",{class:"breadcrumb-item active","aria-current":"page"},"確認訂單",-1),O=P('<div class="mb-12"><div class="row"><div class="col-9 col-md-7 mx-auto"><div class="border border-black"></div></div></div><div class="row"><div class="col-3 col-md-5"><div class="pointer d-flex flex-column align-items-center ps-5"><div class="pointer-num pointer-num-active fs-3 mb-1 text-white fw-semibold">1</div><p class="fs-4 text-primary-200">填寫資料</p></div></div><div class="col-6 col-md-2"><div class="pointer d-flex flex-column align-items-center"><div class="pointer-num fs-3 mb-1 fw-semibold">2</div><p class="fs-4">確認付款</p></div></div><div class="col-3 col-md-5"><div class="pointer d-flex flex-column align-items-center pe-2"><div class="pointer-num fs-3 mb-1 fw-semibold">3</div><p class="fs-4">訂購完成</p></div></div></div></div>',1),q={class:"row pb-40"},F={class:"col-lg-4 mb-8"},H=s("h2",{class:"h4 mb-6 text-center"},"訂單明細",-1),M={class:"bg-card-bg py-6 px-6"},j={class:"fw-semibold text-center mb-4"},z=s("hr",null,null,-1),G={class:"text-end fw-semibold"},J={class:"col-lg-8"},K=s("h2",{class:"h4 mb-6 text-center"},"顧客資料",-1),Q={class:"row justify-content-center"},W={class:"col-lg-10"},X={class:"mb-4"},Y=s("label",{for:"name",class:"form-label"},[i("收件人姓名"),s("span",{class:"text-danger fs-3 ms-1"},"*必填")],-1),Z={class:"mb-4"},ss=s("label",{for:"tel",class:"form-label"},[i("收件人電話"),s("span",{class:"text-danger fs-3 ms-1"},"*必填")],-1),es={class:"mb-4"},ts=s("label",{for:"email",class:"form-label"},[i("Email"),s("span",{class:"text-danger fs-3 ms-1"},"*必填")],-1),os={class:"mb-4"},ls=s("label",{for:"address",class:"form-label"},[i("收件人地址"),s("span",{class:"text-danger fs-3 ms-1"},"*必填")],-1),as={class:"mb-4"},rs=s("label",{for:"message",class:"form-label"},"留言",-1),is=s("div",{class:"text-end"},[s("button",{type:"submit",class:"btn btn-primary-200 text-white"},"送出訂單")],-1);function ds(t,e,cs,ns,l,h){const b=n("RouterLink"),d=n("v-field"),c=n("error-message"),g=n("v-form");return f(),p("div",C,[s("div",R,[s("nav",$,[s("ol",L,[s("li",N,[o(b,{to:"/",class:"text-primary-200"},{default:_(()=>[i("首頁")]),_:1})]),s("li",B,[o(b,{to:"/cart",class:"text-primary-200"},{default:_(()=>[i("購物車")]),_:1})]),D])]),O,s("div",q,[s("div",F,[H,s("div",M,[s("p",j,m(`${t.cart.group*30}天份`),1),(f(!0),p(y,null,T(t.cart.carts,r=>(f(),p("div",{key:r.id,class:"d-flex justify-content-between mb-1"},[s("p",null,m(r.product.title),1),s("p",null,m(`NT$${t.$filters.toThousands(r.total*t.cart.group)} `),1)]))),128)),z,s("p",G,m(`總計NT$ ${t.$filters.toThousands(t.cart.total*t.cart.group)}`),1)])]),s("div",J,[K,s("div",Q,[s("div",W,[o(g,{ref:"form",onSubmit:h.submitOrder},{default:_(({errors:r})=>[s("div",X,[Y,o(d,{id:"name",name:"姓名",type:"text",class:u(["form-control",{"is-invalid":r.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:l.form.user.name,"onUpdate:modelValue":e[0]||(e[0]=a=>l.form.user.name=a)},null,8,["class","modelValue"]),o(c,{name:"姓名",class:"invalid-feedback"})]),s("div",Z,[ss,o(d,{id:"tel",name:"電話",type:"text",class:u(["form-control",{"is-invalid":r.電話}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:l.form.user.tel,"onUpdate:modelValue":e[1]||(e[1]=a=>l.form.user.tel=a)},null,8,["class","modelValue"]),o(c,{name:"電話",class:"invalid-feedback"})]),s("div",es,[ts,o(d,{id:"email",name:"email",type:"email",class:u(["form-control",{"is-invalid":r.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:l.form.user.email,"onUpdate:modelValue":e[2]||(e[2]=a=>l.form.user.email=a)},null,8,["class","modelValue"]),o(c,{name:"email",class:"invalid-feedback"})]),s("div",os,[ls,o(d,{id:"address",name:"地址",type:"text",class:u(["form-control",{"is-invalid":r.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:l.form.user.address,"onUpdate:modelValue":e[3]||(e[3]=a=>l.form.user.address=a)},null,8,["class","modelValue"]),o(c,{name:"地址",class:"invalid-feedback"})]),s("div",as,[rs,S(s("textarea",{id:"message",class:"form-control",cols:"30",rows:"5","onUpdate:modelValue":e[4]||(e[4]=a=>l.form.message=a)},null,512),[[E,l.form.message]])]),is]),_:1},8,["onSubmit"])])])])])])])}const ps=x(U,[["render",ds]]);export{ps as default};
