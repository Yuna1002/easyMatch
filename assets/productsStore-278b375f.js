import{E as l,G as a}from"./index-a4363e81.js";import{c as d,T as p}from"./cartStore-cd54e778.js";import{s as u}from"./scrollStore-42c1bd54.js";const{VITE_APP_URL:c,VITE_APP_PATH:e}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"yuna1002",BASE_URL:"/easyMatch/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},{getCart:n}=d(),{scrollToTop:i}=u(),f=l("product",{state:()=>({productsAll:[],products:[],pages:{},filterProducts:[],category:"全部",categorys:[],loadingItem:""}),actions:{async getProductsAll(){try{const t=await a.get(`${c}/api/${e}/products/all`);this.productsAll=t.data.products;const s=new Set(this.productsAll.map(o=>o.category));this.categorys=[...s],this.getProducts(),i()}catch(t){console.log(t)}},async getProducts(t=1){try{const s=await a.get(`${c}/api/${e}/products/?page=${t}`);this.products=s.data.products,this.pages=s.data.pagination,this.filterProducts=this.products,i()}catch(s){console.log(s)}},filterProduct(t){this.category=t,t==="全部"?this.getProducts():(this.filterProducts=this.productsAll.filter(s=>s.category===t),i())},async addToCart(t,s=30){this.loadingItem=t;const o={product_id:t,qty:s};try{const r=await a.post(`${c}/api/${e}/cart`,{data:o});n(),p.fire({icon:"success",title:r.data.message})}catch(r){console.log(r)}}}});export{f as p};
