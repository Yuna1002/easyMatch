import{v as i,x as s}from"./index-ea3b42c6.js";import{S as l}from"./sweetalert2.all-8bff2fa1.js";const{VITE_APP_URL:o,VITE_APP_PATH:r}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"yuna1002",BASE_URL:"/easyMatch/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},p=i("cart",{state:()=>({cart:{group:1},cartNum:0,openToast:!1,loadingItem:""}),actions:{getCart(){s.get(`${o}/api/${r}/cart`).then(t=>{this.cart=t.data.data,this.cart.group=1,this.checkCart();const a=localStorage.getItem("selectedGroup");a&&(this.cart.group=parseInt(a)),this.calcCartNum(),this.openToast=!1}).catch(t=>{console.log(t)})},calcCartNum(){this.cartNum=this.cart.carts.length},addToCart(t,a=30){this.loadingItem=t;const c={product_id:t,qty:a};s.post(`${o}/api/${r}/cart`,{data:c}).then(e=>{e.data.success===!0&&(this.openToast=!0),this.getCart()}).catch(e=>{console.log(e)})},delCart(t){this.loadingItem=t,s.delete(`${o}/api/${r}/cart/${t}`).then(a=>{l.fire({icon:"success",toast:!0,position:"top",showConfirmButton:!1,title:a.data.message,timer:1500}),this.getCart()}).catch(a=>{alert(a.data.message)})},saveToLocal(){localStorage.setItem("selectedGroup",this.cart.group)},checkCart(){this.cart.carts.length===0&&localStorage.setItem("selectedGroup",1)}},getters:{}});export{p as c};
